<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns:p="urn:jbpm.org:jpdl-3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:jbpm.org:jpdl-3.2 urn:jbpm.org:jpdl-3.2 " name="">
   <start-state name="CaptureRequest">
      	<description>
			/template1.action?screenName=frmRequestList
		</description>
		<transition to="mail-node1"></transition>
		<event type="after-signal">
			<action name="sam" class="businesslogic.LoginBL"></action>
		</event>
   </start-state>
   <decision name="Approve" >
		<transition to="end" name="rejected"></transition>
		<transition to="Allocate" name="approved"></transition>
	</decision>

	<task-node name="Allocate">
		<task>
			<assignment expression="hello expression"></assignment>
		</task>
		<event type="before-signal">
			<mail></mail>
			<script></script>
		</event>
	</task-node>

	<mail-node name="mail-node1" template="template1" async="true" to="">
		<description>
			hello mail
		</description>
		<subject>
			sa
		</subject>
		<text>
			This is being sent from mail-node1 main activity...
regards,
Samarjit
		</text>
		<event type="task-start">
			<script name="myscript">
				pojo.CreateMailFromTemplate cm = new pojo.CreateMailFromTemplate();
HashMap hm = new HashMap();
		hm.put(&quot;empid&quot;, &quot;dav&quot;);
		hm.put(&quot;empname&quot;, &quot;value2&quot;);
		 
		try {
			 cm.createEmail(&quot;employeenotification&quot;,hm);
			 System.out.println(cm);
		} catch (Exception e) {
			e.printStackTrace();
		}
actionclass.SendMailAC smAC = new actionclass.SendMailAC();
		smAC.setSendto(cm.getSendto());
		smAC.setFrom(cm.getFrom());
		smAC.setSubject(cm.getSubject());
		smAC.setMsgbody(cm.getMsgbody()+&quot;This email is to tell you that the script of mail-node1 works&quot;);
		smAC.sendJavaMail();
System.out.println(&quot;This is executed from script&quot;);
			</script>
			<action name="asdAction" expression="some expression"></action>
		</event>
		<transition to="Approve">
	 
		
			<mail name="sam" to="sd" async="true">
				<subject>
					fg
				</subject>
				<text>
					fg
				</text>
			</mail>
			<mail name="smoe" to="te">
				<subject>
					te
				</subject>
				<text>
					sgfgf
				</text>
			</mail>
		</transition>
		
	</mail-node>


	<end-state name="end"></end-state>
</process-definition>